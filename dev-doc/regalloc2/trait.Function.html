<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A trait defined by the regalloc client to provide access to its machine-instruction / CFG representation."><meta name="keywords" content="rust, rustlang, rust-lang, Function"><title>Function in regalloc2 - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../dark.css" disabled><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script src="../crates.js"></script><script defer src="../main.js"></script>
    <noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../regalloc2/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../regalloc2/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"><a href="#">Function</a></h2><div class="sidebar-elems"><section><div class="block"><h3 class="sidebar-title"><a href="#required-methods">Required Methods</a></h3><ul><li><a href="#tymethod.block_insns">block_insns</a></li><li><a href="#tymethod.block_params">block_params</a></li><li><a href="#tymethod.block_preds">block_preds</a></li><li><a href="#tymethod.block_succs">block_succs</a></li><li><a href="#tymethod.branch_blockparams">branch_blockparams</a></li><li><a href="#tymethod.entry_block">entry_block</a></li><li><a href="#tymethod.inst_clobbers">inst_clobbers</a></li><li><a href="#tymethod.inst_operands">inst_operands</a></li><li><a href="#tymethod.is_branch">is_branch</a></li><li><a href="#tymethod.is_move">is_move</a></li><li><a href="#tymethod.is_ret">is_ret</a></li><li><a href="#tymethod.num_blocks">num_blocks</a></li><li><a href="#tymethod.num_insts">num_insts</a></li><li><a href="#tymethod.num_vregs">num_vregs</a></li><li><a href="#tymethod.spillslot_size">spillslot_size</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#provided-methods">Provided Methods</a></h3><ul><li><a href="#method.allow_multiple_vreg_defs">allow_multiple_vreg_defs</a></li><li><a href="#method.debug_value_labels">debug_value_labels</a></li><li><a href="#method.is_pinned_vreg">is_pinned_vreg</a></li><li><a href="#method.multi_spillslot_named_by_last_slot">multi_spillslot_named_by_last_slot</a></li><li><a href="#method.reftype_vregs">reftype_vregs</a></li><li><a href="#method.requires_refs_on_stack">requires_refs_on_stack</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#implementors">Implementors</a></h3></div></section><h2 class="location"><a href="index.html">In regalloc2</a></h2><div id="sidebar-vars" data-name="Function" data-ty="trait" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../regalloc2/index.html"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></a><nav class="sub"><div class="theme-picker hidden"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="22" height="22" alt="Pick another theme!" src="../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Trait <a href="index.html">regalloc2</a>::<wbr><a class="trait" href="#">Function</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../src/regalloc2/lib.rs.html#965-1158">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><div class="docblock item-decl"><pre class="rust trait"><code>pub trait Function {
<details class="rustdoc-toggle type-contents-toggle"><summary class="hideme"><span>Show 21 methods</span></summary>    fn <a href="#tymethod.num_insts" class="fnname">num_insts</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.num_blocks" class="fnname">num_blocks</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.entry_block" class="fnname">entry_block</a>(&amp;self) -&gt; <a class="struct" href="struct.Block.html" title="struct regalloc2::Block">Block</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.block_insns" class="fnname">block_insns</a>(&amp;self, block: <a class="struct" href="struct.Block.html" title="struct regalloc2::Block">Block</a>) -&gt; <a class="struct" href="struct.InstRange.html" title="struct regalloc2::InstRange">InstRange</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.block_succs" class="fnname">block_succs</a>(&amp;self, block: <a class="struct" href="struct.Block.html" title="struct regalloc2::Block">Block</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="struct" href="struct.Block.html" title="struct regalloc2::Block">Block</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.block_preds" class="fnname">block_preds</a>(&amp;self, block: <a class="struct" href="struct.Block.html" title="struct regalloc2::Block">Block</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="struct" href="struct.Block.html" title="struct regalloc2::Block">Block</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.block_params" class="fnname">block_params</a>(&amp;self, block: <a class="struct" href="struct.Block.html" title="struct regalloc2::Block">Block</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="struct" href="struct.VReg.html" title="struct regalloc2::VReg">VReg</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.is_ret" class="fnname">is_ret</a>(&amp;self, insn: <a class="struct" href="struct.Inst.html" title="struct regalloc2::Inst">Inst</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.is_branch" class="fnname">is_branch</a>(&amp;self, insn: <a class="struct" href="struct.Inst.html" title="struct regalloc2::Inst">Inst</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.branch_blockparams" class="fnname">branch_blockparams</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="struct.Block.html" title="struct regalloc2::Block">Block</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;insn: <a class="struct" href="struct.Inst.html" title="struct regalloc2::Inst">Inst</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;succ_idx: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a><br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="struct" href="struct.VReg.html" title="struct regalloc2::VReg">VReg</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.is_move" class="fnname">is_move</a>(&amp;self, insn: <a class="struct" href="struct.Inst.html" title="struct regalloc2::Inst">Inst</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">(</a><a class="struct" href="struct.Operand.html" title="struct regalloc2::Operand">Operand</a>, <a class="struct" href="struct.Operand.html" title="struct regalloc2::Operand">Operand</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">)</a>&gt;;
<div class="item-spacer"></div>    fn <a href="#tymethod.inst_operands" class="fnname">inst_operands</a>(&amp;self, insn: <a class="struct" href="struct.Inst.html" title="struct regalloc2::Inst">Inst</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="struct" href="struct.Operand.html" title="struct regalloc2::Operand">Operand</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.inst_clobbers" class="fnname">inst_clobbers</a>(&amp;self, insn: <a class="struct" href="struct.Inst.html" title="struct regalloc2::Inst">Inst</a>) -&gt; <a class="struct" href="struct.PRegSet.html" title="struct regalloc2::PRegSet">PRegSet</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.num_vregs" class="fnname">num_vregs</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.spillslot_size" class="fnname">spillslot_size</a>(&amp;self, regclass: <a class="enum" href="enum.RegClass.html" title="enum regalloc2::RegClass">RegClass</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>;

    fn <a href="#method.requires_refs_on_stack" class="fnname">requires_refs_on_stack</a>(&amp;self, _: <a class="struct" href="struct.Inst.html" title="struct regalloc2::Inst">Inst</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a> { ... }
<div class="item-spacer"></div>    fn <a href="#method.reftype_vregs" class="fnname">reftype_vregs</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="struct" href="struct.VReg.html" title="struct regalloc2::VReg">VReg</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a> { ... }
<div class="item-spacer"></div>    fn <a href="#method.debug_value_labels" class="fnname">debug_value_labels</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">(</a><a class="struct" href="struct.VReg.html" title="struct regalloc2::VReg">VReg</a>, <a class="struct" href="struct.Inst.html" title="struct regalloc2::Inst">Inst</a>, <a class="struct" href="struct.Inst.html" title="struct regalloc2::Inst">Inst</a>, <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u32.html">u32</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">)</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a> { ... }
<div class="item-spacer"></div>    fn <a href="#method.is_pinned_vreg" class="fnname">is_pinned_vreg</a>(&amp;self, _: <a class="struct" href="struct.VReg.html" title="struct regalloc2::VReg">VReg</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.PReg.html" title="struct regalloc2::PReg">PReg</a>&gt; { ... }
<div class="item-spacer"></div>    fn <a href="#method.multi_spillslot_named_by_last_slot" class="fnname">multi_spillslot_named_by_last_slot</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a> { ... }
<div class="item-spacer"></div>    fn <a href="#method.allow_multiple_vreg_defs" class="fnname">allow_multiple_vreg_defs</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a> { ... }
</details>}</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A trait defined by the regalloc client to provide access to its
machine-instruction / CFG representation.</p>
<p>(This trait’s design is inspired by, and derives heavily from, the
trait of the same name in regalloc.rs.)</p>
</div></details><h2 id="required-methods" class="small-section-header">Required methods<a href="#required-methods" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle" open><summary><div id="tymethod.num_insts" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/regalloc2/lib.rs.html#971">source</a></div><h4 class="code-header">fn <a href="#tymethod.num_insts" class="fnname">num_insts</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></h4></div></summary><div class="docblock"><p>How many instructions are there?</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.num_blocks" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/regalloc2/lib.rs.html#974">source</a></div><h4 class="code-header">fn <a href="#tymethod.num_blocks" class="fnname">num_blocks</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></h4></div></summary><div class="docblock"><p>How many blocks are there?</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.entry_block" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/regalloc2/lib.rs.html#977">source</a></div><h4 class="code-header">fn <a href="#tymethod.entry_block" class="fnname">entry_block</a>(&amp;self) -&gt; <a class="struct" href="struct.Block.html" title="struct regalloc2::Block">Block</a></h4></div></summary><div class="docblock"><p>Get the index of the entry block.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.block_insns" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/regalloc2/lib.rs.html#980">source</a></div><h4 class="code-header">fn <a href="#tymethod.block_insns" class="fnname">block_insns</a>(&amp;self, block: <a class="struct" href="struct.Block.html" title="struct regalloc2::Block">Block</a>) -&gt; <a class="struct" href="struct.InstRange.html" title="struct regalloc2::InstRange">InstRange</a></h4></div></summary><div class="docblock"><p>Provide the range of instruction indices contained in each block.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.block_succs" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/regalloc2/lib.rs.html#983">source</a></div><h4 class="code-header">fn <a href="#tymethod.block_succs" class="fnname">block_succs</a>(&amp;self, block: <a class="struct" href="struct.Block.html" title="struct regalloc2::Block">Block</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="struct" href="struct.Block.html" title="struct regalloc2::Block">Block</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a></h4></div></summary><div class="docblock"><p>Get CFG successors for a given block.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.block_preds" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/regalloc2/lib.rs.html#986">source</a></div><h4 class="code-header">fn <a href="#tymethod.block_preds" class="fnname">block_preds</a>(&amp;self, block: <a class="struct" href="struct.Block.html" title="struct regalloc2::Block">Block</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="struct" href="struct.Block.html" title="struct regalloc2::Block">Block</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a></h4></div></summary><div class="docblock"><p>Get the CFG predecessors for a given block.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.block_params" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/regalloc2/lib.rs.html#989">source</a></div><h4 class="code-header">fn <a href="#tymethod.block_params" class="fnname">block_params</a>(&amp;self, block: <a class="struct" href="struct.Block.html" title="struct regalloc2::Block">Block</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="struct" href="struct.VReg.html" title="struct regalloc2::VReg">VReg</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a></h4></div></summary><div class="docblock"><p>Get the block parameters for a given block.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.is_ret" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/regalloc2/lib.rs.html#992">source</a></div><h4 class="code-header">fn <a href="#tymethod.is_ret" class="fnname">is_ret</a>(&amp;self, insn: <a class="struct" href="struct.Inst.html" title="struct regalloc2::Inst">Inst</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></h4></div></summary><div class="docblock"><p>Determine whether an instruction is a return instruction.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.is_branch" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/regalloc2/lib.rs.html#996">source</a></div><h4 class="code-header">fn <a href="#tymethod.is_branch" class="fnname">is_branch</a>(&amp;self, insn: <a class="struct" href="struct.Inst.html" title="struct regalloc2::Inst">Inst</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></h4></div></summary><div class="docblock"><p>Determine whether an instruction is the end-of-block
branch.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.branch_blockparams" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/regalloc2/lib.rs.html#1002">source</a></div><h4 class="code-header">fn <a href="#tymethod.branch_blockparams" class="fnname">branch_blockparams</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="struct.Block.html" title="struct regalloc2::Block">Block</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;insn: <a class="struct" href="struct.Inst.html" title="struct regalloc2::Inst">Inst</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;succ_idx: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a><br>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="struct" href="struct.VReg.html" title="struct regalloc2::VReg">VReg</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a></h4></div></summary><div class="docblock"><p>If <code>insn</code> is a branch at the end of <code>block</code>, returns the
outgoing blockparam arguments for the given successor. The
number of arguments must match the number incoming blockparams
for each respective successor block.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.is_move" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/regalloc2/lib.rs.html#1020">source</a></div><h4 class="code-header">fn <a href="#tymethod.is_move" class="fnname">is_move</a>(&amp;self, insn: <a class="struct" href="struct.Inst.html" title="struct regalloc2::Inst">Inst</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">(</a><a class="struct" href="struct.Operand.html" title="struct regalloc2::Operand">Operand</a>, <a class="struct" href="struct.Operand.html" title="struct regalloc2::Operand">Operand</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">)</a>&gt;</h4></div></summary><div class="docblock"><p>Determine whether an instruction is a move; if so, return the
Operands for (src, dst).</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.inst_operands" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/regalloc2/lib.rs.html#1027">source</a></div><h4 class="code-header">fn <a href="#tymethod.inst_operands" class="fnname">inst_operands</a>(&amp;self, insn: <a class="struct" href="struct.Inst.html" title="struct regalloc2::Inst">Inst</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="struct" href="struct.Operand.html" title="struct regalloc2::Operand">Operand</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a></h4></div></summary><div class="docblock"><p>Get the Operands for an instruction.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.inst_clobbers" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/regalloc2/lib.rs.html#1059">source</a></div><h4 class="code-header">fn <a href="#tymethod.inst_clobbers" class="fnname">inst_clobbers</a>(&amp;self, insn: <a class="struct" href="struct.Inst.html" title="struct regalloc2::Inst">Inst</a>) -&gt; <a class="struct" href="struct.PRegSet.html" title="struct regalloc2::PRegSet">PRegSet</a></h4></div></summary><div class="docblock"><p>Get the clobbers for an instruction; these are the registers
that, after the instruction has executed, hold values that are
arbitrary, separately from the usual outputs to the
instruction. It is invalid to read a register that has been
clobbered; the register allocator is free to assume that
clobbered registers are filled with garbage and available for
reuse. It will avoid storing any value in a clobbered register
that must be live across the instruction.</p>
<p>Another way of seeing this is that a clobber is equivalent to
an “early def” of a fresh vreg that is not used anywhere else
in the program, with a fixed-register constraint that places
it in a given PReg chosen by the client prior to regalloc.</p>
<p>Every register written by an instruction must either
correspond to (be assigned to) an Operand of kind <code>Def</code> or
<code>Mod</code>, or else must be a “clobber”.</p>
<p>This can be used to, for example, describe ABI-specified
registers that are not preserved by a call instruction, or
fixed physical registers written by an instruction but not
used as a vreg output, or fixed physical registers used as
temps within an instruction out of necessity.</p>
<p>Note that it is legal for a register to be both a clobber and
an actual def (via pinned vreg or via operand constrained to
the reg). This is for convenience: e.g., a call instruction
might have a constant clobber set determined by the ABI, but
some of those clobbered registers are sometimes return
value(s).</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.num_vregs" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/regalloc2/lib.rs.html#1062">source</a></div><h4 class="code-header">fn <a href="#tymethod.num_vregs" class="fnname">num_vregs</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></h4></div></summary><div class="docblock"><p>Get the number of <code>VReg</code> in use in this function.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.spillslot_size" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/regalloc2/lib.rs.html#1131">source</a></div><h4 class="code-header">fn <a href="#tymethod.spillslot_size" class="fnname">spillslot_size</a>(&amp;self, regclass: <a class="enum" href="enum.RegClass.html" title="enum regalloc2::RegClass">RegClass</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></h4></div></summary><div class="docblock"><p>How many logical spill slots does the given regclass require?  E.g., on
a 64-bit machine, spill slots may nominally be 64-bit words, but a
128-bit vector value will require two slots.  The regalloc will always
align on this size.</p>
<p>(This trait method’s design and doc text derives from
regalloc.rs’ trait of the same name.)</p>
</div></details></div><h2 id="provided-methods" class="small-section-header">Provided methods<a href="#provided-methods" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle" open><summary><div id="method.requires_refs_on_stack" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/regalloc2/lib.rs.html#1014-1016">source</a></div><h4 class="code-header">fn <a href="#method.requires_refs_on_stack" class="fnname">requires_refs_on_stack</a>(&amp;self, _: <a class="struct" href="struct.Inst.html" title="struct regalloc2::Inst">Inst</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></h4></div></summary><div class="docblock"><p>Determine whether an instruction requires all reference-typed
values to be placed onto the stack. For these instructions,
stackmaps will be provided.</p>
<p>This is usually associated with the concept of a “safepoint”,
though strictly speaking, a safepoint could also support
reference-typed values in registers if there were a way to
denote their locations and if this were acceptable to the
client. Usually garbage-collector implementations want to see
roots on the stack, so we do that for now.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="method.reftype_vregs" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/regalloc2/lib.rs.html#1078-1080">source</a></div><h4 class="code-header">fn <a href="#method.reftype_vregs" class="fnname">reftype_vregs</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="struct" href="struct.VReg.html" title="struct regalloc2::VReg">VReg</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a></h4></div></summary><div class="docblock"><p>Get the VRegs that are pointer/reference types. This has the
following effects for each such vreg:</p>
<ul>
<li>At all safepoint instructions, the vreg will be in a
SpillSlot, not in a register.</li>
<li>The vreg <em>may not</em> be used as a register operand on
safepoint instructions: this is because a vreg can only live
in one place at a time. The client should copy the value to an
integer-typed vreg and use this to pass a pointer as an input
to a safepoint instruction (such as a function call).</li>
<li>At all safepoint instructions, all live vregs’ locations
will be included in a list in the <code>Output</code> below, so that
pointer-inspecting/updating functionality (such as a moving
garbage collector) may observe and edit their values.</li>
</ul>
</div></details><details class="rustdoc-toggle" open><summary><div id="method.debug_value_labels" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/regalloc2/lib.rs.html#1099-1101">source</a></div><h4 class="code-header">fn <a href="#method.debug_value_labels" class="fnname">debug_value_labels</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">(</a><a class="struct" href="struct.VReg.html" title="struct regalloc2::VReg">VReg</a>, <a class="struct" href="struct.Inst.html" title="struct regalloc2::Inst">Inst</a>, <a class="struct" href="struct.Inst.html" title="struct regalloc2::Inst">Inst</a>, <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u32.html">u32</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">)</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a></h4></div></summary><div class="docblock"><p>Get the VRegs for which we should generate value-location
metadata for debugging purposes. This can be used to generate
e.g. DWARF with valid prgram-point ranges for each value
expression in a way that is more efficient than a post-hoc
analysis of the allocator’s output.</p>
<p>Each tuple is (vreg, inclusive_start, exclusive_end,
label). In the <code>Output</code> there will be (label, inclusive_start,
exclusive_end, alloc)` tuples. The ranges may not exactly
match – specifically, the returned metadata may cover only a
subset of the requested ranges – if the value is not live for
the entire requested ranges.</p>
<p>The instruction indices imply a program point just <em>before</em>
the instruction.</p>
<p>Precondition: we require this slice to be sorted by vreg.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="method.is_pinned_vreg" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/regalloc2/lib.rs.html#1116-1118">source</a></div><h4 class="code-header">fn <a href="#method.is_pinned_vreg" class="fnname">is_pinned_vreg</a>(&amp;self, _: <a class="struct" href="struct.VReg.html" title="struct regalloc2::VReg">VReg</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.PReg.html" title="struct regalloc2::PReg">PReg</a>&gt;</h4></div></summary><div class="docblock"><p>Is the given vreg pinned to a preg? If so, every use of the
vreg is automatically assigned to the preg, and live-ranges of
the vreg allocate the preg exclusively (are not spilled
elsewhere). The user must take care not to have too many live
pinned vregs such that allocation is no longer possible;
liverange computation will check that this is the case (that
there are enough remaining allocatable pregs of every class to
hold all Reg-constrained operands).</p>
<p>Pinned vregs are implicitly live-in to the function: that is,
one can use a pinned vreg without having first defined it, and
this will take the value that that physical register (to which
the vreg is pinned) had at function entry.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="method.multi_spillslot_named_by_last_slot" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/regalloc2/lib.rs.html#1137-1139">source</a></div><h4 class="code-header">fn <a href="#method.multi_spillslot_named_by_last_slot" class="fnname">multi_spillslot_named_by_last_slot</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></h4></div></summary><div class="docblock"><p>When providing a spillslot number for a multi-slot spillslot,
do we provide the first or the last? This is usually related
to which direction the stack grows and different clients may
have different preferences.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="method.allow_multiple_vreg_defs" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/regalloc2/lib.rs.html#1155-1157">source</a></div><h4 class="code-header">fn <a href="#method.allow_multiple_vreg_defs" class="fnname">allow_multiple_vreg_defs</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></h4></div></summary><div class="docblock"><p>Allow a single instruction to define a vreg multiple times. If
allowed, the semantics are as if the definition occurs only
once, and all defs will get the same alloc. This flexibility is
meant to allow the embedder to more easily aggregate operands
together in macro/pseudoinstructions, or e.g. add additional
clobbered vregs without taking care to deduplicate. This may be
particularly useful when referring to physical registers via
pinned vregs. It is optional functionality because a strict mode
(at most one def per vreg) is also useful for finding bugs in
other applications.</p>
</div></details></div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor"></a></h2><div class="item-list" id="implementors-list"></div><script type="text/javascript" src="../implementors/regalloc2/trait.Function.js" async></script></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="regalloc2" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.61.0-nightly (285fa7ecd 2022-03-14)" ></div>
</body></html>