<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Trait for language implementors to use to generate glue code between native WebAssembly signatures and interface types signatures."><meta name="keywords" content="rust, rustlang, rust-lang, Bindgen"><title>Bindgen in witx - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../dark.css" disabled><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script src="../crates.js"></script><script defer src="../main.js"></script>
    <noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../witx/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../witx/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"><a href="#">Bindgen</a></h2><div class="sidebar-elems"><section><div class="block"><h3 class="sidebar-title"><a href="#associated-types">Associated Types</a></h3><ul><li><a href="#associatedtype.Operand">Operand</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#required-methods">Required Methods</a></h3><ul><li><a href="#tymethod.allocate_space">allocate_space</a></li><li><a href="#tymethod.emit">emit</a></li><li><a href="#tymethod.finish_block">finish_block</a></li><li><a href="#tymethod.push_block">push_block</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#implementors">Implementors</a></h3></div></section><h2 class="location"><a href="index.html">In witx</a></h2><div id="sidebar-vars" data-name="Bindgen" data-ty="trait" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../witx/index.html"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></a><nav class="sub"><div class="theme-picker hidden"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="22" height="22" alt="Pick another theme!" src="../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Trait <a href="index.html">witx</a>::<wbr><a class="trait" href="#">Bindgen</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../src/witx/abi.rs.html#392-445">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><div class="docblock item-decl"><pre class="rust trait"><code>pub trait Bindgen {
    type <a href="#associatedtype.Operand" class="associatedtype">Operand</a>;
    fn <a href="#tymethod.emit" class="fnname">emit</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inst: &amp;<a class="enum" href="enum.Instruction.html" title="enum witx::Instruction">Instruction</a>&lt;'_&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;operands: &amp;mut <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;Self::<a class="associatedtype" href="trait.Bindgen.html#associatedtype.Operand" title="type witx::Bindgen::Operand">Operand</a>&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;results: &amp;mut <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;Self::<a class="associatedtype" href="trait.Bindgen.html#associatedtype.Operand" title="type witx::Bindgen::Operand">Operand</a>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;);
<div class="item-spacer"></div>    fn <a href="#tymethod.allocate_space" class="fnname">allocate_space</a>(&amp;mut self, slot: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, ty: &amp;<a class="struct" href="struct.NamedType.html" title="struct witx::NamedType">NamedType</a>);
<div class="item-spacer"></div>    fn <a href="#tymethod.push_block" class="fnname">push_block</a>(&amp;mut self);
<div class="item-spacer"></div>    fn <a href="#tymethod.finish_block" class="fnname">finish_block</a>(&amp;mut self, operand: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;Self::<a class="associatedtype" href="trait.Bindgen.html#associatedtype.Operand" title="type witx::Bindgen::Operand">Operand</a>&gt;);
}</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Trait for language implementors to use to generate glue code between native
WebAssembly signatures and interface types signatures.</p>
<p>This is used as an implementation detail in interpreting the ABI between
interface types and wasm types. Eventually this will be driven by interface
types adapters themselves, but for now the ABI of a function dictates what
instructions are fed in.</p>
<p>Types implementing <code>Bindgen</code> are incrementally fed <code>Instruction</code> values to
generate code for. Instructions operate like a stack machine where each
instruction has a list of inputs and a list of outputs (provided by the
<code>emit</code> function).</p>
</div></details><h2 id="associated-types" class="small-section-header">Associated Types<a href="#associated-types" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle" open><summary><div id="associatedtype.Operand" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/witx/abi.rs.html#396">source</a></div><h4 class="code-header">type <a href="#associatedtype.Operand" class="associatedtype">Operand</a></h4></div></summary><div class="docblock"><p>The intermediate type for fragments of code for this type.</p>
<p>For most languages <code>String</code> is a suitable intermediate type.</p>
</div></details></div><h2 id="required-methods" class="small-section-header">Required methods<a href="#required-methods" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle" open><summary><div id="tymethod.emit" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/witx/abi.rs.html#406-411">source</a></div><h4 class="code-header">fn <a href="#tymethod.emit" class="fnname">emit</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;inst: &amp;<a class="enum" href="enum.Instruction.html" title="enum witx::Instruction">Instruction</a>&lt;'_&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;operands: &amp;mut <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;Self::<a class="associatedtype" href="trait.Bindgen.html#associatedtype.Operand" title="type witx::Bindgen::Operand">Operand</a>&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;results: &amp;mut <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;Self::<a class="associatedtype" href="trait.Bindgen.html#associatedtype.Operand" title="type witx::Bindgen::Operand">Operand</a>&gt;<br>)</h4></div></summary><div class="docblock"><p>Emit code to implement the given instruction.</p>
<p>Each operand is given in <code>operands</code> and can be popped off if ownership
is required. It’s guaranteed that <code>operands</code> has the appropriate length
for the <code>inst</code> given, as specified with <a href="enum.Instruction.html" title="Instruction"><code>Instruction</code></a>.</p>
<p>Each result variable should be pushed onto <code>results</code>. This function must
push the appropriate number of results or binding generation will panic.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.allocate_space" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/witx/abi.rs.html#418">source</a></div><h4 class="code-header">fn <a href="#tymethod.allocate_space" class="fnname">allocate_space</a>(&amp;mut self, slot: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, ty: &amp;<a class="struct" href="struct.NamedType.html" title="struct witx::NamedType">NamedType</a>)</h4></div></summary><div class="docblock"><p>Allocates temporary space in linear memory indexed by <code>slot</code> with enough
space to store <code>ty</code>.</p>
<p>This is called when calling some wasm functions where a return pointer
is needed.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.push_block" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/witx/abi.rs.html#429">source</a></div><h4 class="code-header">fn <a href="#tymethod.push_block" class="fnname">push_block</a>(&amp;mut self)</h4></div></summary><div class="docblock"><p>Enters a new block of code to generate code for.</p>
<p>This is currently exclusively used for constructing variants. When a
variant is constructed a block here will be pushed for each case of a
variant, generating the code necessary to translate a variant case.</p>
<p>Blocks are completed with <code>finish_block</code> below. It’s expected that <code>emit</code>
will always push code (if necessary) into the “current block”, which is
updated by calling this method and <code>finish_block</code> below.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.finish_block" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/witx/abi.rs.html#444">source</a></div><h4 class="code-header">fn <a href="#tymethod.finish_block" class="fnname">finish_block</a>(&amp;mut self, operand: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;Self::<a class="associatedtype" href="trait.Bindgen.html#associatedtype.Operand" title="type witx::Bindgen::Operand">Operand</a>&gt;)</h4></div></summary><div class="docblock"><p>Indicates to the code generator that a block is completed, and the
<code>operand</code> specified was the resulting value of the block.</p>
<p>This method will be used to compute the value of each arm of lifting a
variant. The <code>operand</code> will be <code>None</code> if the variant case didn’t
actually have any type associated with it. Otherwise it will be <code>Some</code>
as the last value remaining on the stack representing the value
associated with a variant’s <code>case</code>.</p>
<p>It’s expected that this will resume code generation in the previous
block before <code>push_block</code> was called. This must also save the results
of the current block internally for instructions like <code>ResultLift</code> to
use later.</p>
</div></details></div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor"></a></h2><div class="item-list" id="implementors-list"></div><script type="text/javascript" src="../implementors/witx/trait.Bindgen.js" async></script></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="witx" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.61.0-nightly (285fa7ecd 2022-03-14)" ></div>
</body></html>